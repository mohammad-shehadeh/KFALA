<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>معرض الصور - إطار مرن</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            color: #333;
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            border: 1px solid rgba(0, 0, 0, 0.05);
        }
        
        h1 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 2.2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }
        
        .subtitle {
            color: #6c757d;
            font-size: 1rem;
            margin-bottom: 15px;
        }
        
        .info-box {
            background: #e8f4fc;
            border-right: 5px solid #3498db;
            padding: 12px 15px;
            border-radius: 8px;
            margin: 15px 0;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .stats {
            text-align: center;
            padding: 12px;
            background: rgba(52, 152, 219, 0.1);
            border-radius: 10px;
            margin-bottom: 20px;
            font-weight: bold;
            color: #2c3e50;
            border: 2px dashed #3498db;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .control-btn {
            padding: 10px 20px;
            background: linear-gradient(to right, #2ecc71, #27ae60);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .control-btn.secondary {
            background: linear-gradient(to right, #9b59b6, #8e44ad);
        }
        
        .control-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }
        
        .card {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
            border: 1px solid #eee;
            display: flex;
            flex-direction: column;
            height: fit-content;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 25px rgba(0, 0, 0, 0.15);
        }
        
        /* إطار الصورة المرن - يأخذ حجم الصورة الأصلي */
        .image-container {
            width: 100%;
            overflow: hidden;
            background: #f8f9fa;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 0;
            border-bottom: 1px solid #eee;
            min-height: 100px;
            max-height: 600px; /* ارتفاع أقصى لتجنب الصور الطويلة جدًا */
        }
        
        .image-container img {
            display: block;
            max-width: 100%;
            max-height: 500px;
            height: auto;
            width: auto;
            object-fit: contain;
            border-radius: 0;
        }
        
        .card-content {
            padding: 15px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }
        
        .card-title {
            font-size: 1.1rem;
            margin-bottom: 8px;
            color: #2c3e50;
            word-break: break-word;
        }
        
        .file-info {
            font-size: 0.8rem;
            color: #6c757d;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .image-size {
            background: #e9ecef;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.75rem;
        }
        
        .download-btn {
            display: block;
            width: 100%;
            padding: 10px;
            background: linear-gradient(to right, #3498db, #2980b9);
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s ease;
            text-align: center;
            text-decoration: none;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin-top: auto;
        }
        
        .download-btn:hover {
            background: linear-gradient(to right, #2980b9, #1f639e);
        }
        
        .footer {
            text-align: center;
            padding: 20px;
            margin-top: 30px;
            color: #6c757d;
            font-size: 0.85rem;
            border-top: 1px solid #e0e0e0;
        }
        
        .loading {
            text-align: center;
            padding: 40px 20px;
            font-size: 1.1rem;
            color: #3498db;
            grid-column: 1 / -1;
        }
        
        .error {
            text-align: center;
            padding: 20px;
            background: #ffebee;
            color: #c62828;
            border-radius: 10px;
            margin: 20px 0;
            grid-column: 1 / -1;
        }
        
        .image-counter {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: bold;
            z-index: 1;
        }
        
        .image-wrapper {
            position: relative;
            width: 100%;
        }
        
        .view-toggle {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .view-btn {
            padding: 8px 15px;
            background: #e9ecef;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .view-btn.active {
            background: #3498db;
            color: white;
        }
        
        @media (max-width: 768px) {
            .gallery {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
                gap: 15px;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            .image-container img {
                max-height: 400px;
            }
        }
        
        @media (max-width: 480px) {
            body {
                padding: 10px;
            }
            
            .gallery {
                grid-template-columns: 1fr;
            }
            
            .controls {
                flex-direction: column;
                align-items: center;
            }
            
            .control-btn {
                width: 100%;
                justify-content: center;
            }
            
            .image-container img {
                max-height: 350px;
            }
        }
        
        /* أنيميشن لتحميل الصور */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .card {
            animation: fadeIn 0.5s ease;
        }
        
        /* نمط للصور العمودية */
        .card.portrait .image-container {
            max-height: 700px;
        }
        
        .card.portrait .image-container img {
            max-height: 650px;
        }
        
        /* نمط للصور الأفقية */
        .card.landscape .image-container {
            max-height: 400px;
        }
        
        .card.landscape .image-container img {
            max-height: 350px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-images"></i> معرض الصور - إطار مرن</h1>
            <p class="subtitle">كل صورة تعرض بحجمها الأصلي مع إطار مرن يتكيف مع أبعادها</p>
            <div class="info-box">
                <i class="fas fa-expand-alt"></i>
                <span>إطار كل صورة يتكيف تلقائيًا مع حجمها الأصلي</span>
            </div>
            
            <div class="view-toggle" id="viewToggle">
                <button class="view-btn active" data-view="flexible">
                    <i class="fas fa-expand-alt"></i> إطار مرن
                </button>
                <button class="view-btn" data-view="fixed">
                    <i class="fas fa-crop-alt"></i> إطار ثابت
                </button>
            </div>
            
            <div class="controls">
                <button class="control-btn" onclick="scanForImages()">
                    <i class="fas fa-search"></i> بحث عن الصور
                </button>
                <button class="control-btn secondary" onclick="showHowToAddImages()">
                    <i class="fas fa-question-circle"></i> المساعدة
                </button>
            </div>
        </header>
        
        <div class="stats" id="statsContainer">
            <i class="fas fa-sync-alt fa-spin"></i> جاري البحث عن الصور...
        </div>
        
        <div id="imageGallery" class="gallery">
            <!-- سيتم إضافة الصور هنا ديناميكيًا -->
            <div class="loading">
                <i class="fas fa-spinner fa-spin"></i> جاري فحص الملفات في الجذر...
            </div>
        </div>
        
        <div class="footer">
            <p>معرض الصور التلقائي &copy; <span id="currentYear"></span> | كل صورة بحجمها الطبيعي</p>
        </div>
    </div>

    <script>
        // سنة حقوق النشر
        document.getElementById('currentYear').textContent = new Date().getFullYear();
        
        // العناصر الرئيسية
        const galleryElement = document.getElementById('imageGallery');
        const statsContainer = document.getElementById('statsContainer');
        const viewToggle = document.getElementById('viewToggle');
        
        // حالة العرض الحالية
        let currentView = 'flexible';
        
        // امتدادات الصور المدعومة
        const imageExtensions = ['.jpg', '.jpeg', '.png', '.gif', '.bmp', '.webp', '.svg'];
        
        // قائمة بأسماء الصور المحتملة (يمكن تعديلها حسب احتياجاتك)
        const commonImageNames = [
            'IMG_4419.jpeg', 'IMG_4420.jpg', 'IMG_4421.png',
            'photo1.jpg', 'photo2.jpg', 'image1.png', 'image2.jpeg',
            'nature.jpg', 'sunset.png', 'mountain.jpeg', 'beach.jpg',
            'profile.png', 'logo.png', 'background.jpg', 'example.png'
        ];
        
        // تهيئة أزرار تغيير العرض
        function initViewToggle() {
            const viewButtons = viewToggle.querySelectorAll('.view-btn');
            viewButtons.forEach(btn => {
                btn.addEventListener('click', function() {
                    // إزالة النشاط من جميع الأزرار
                    viewButtons.forEach(b => b.classList.remove('active'));
                    // إضافة النشاط للزر المضغوط
                    this.classList.add('active');
                    // تحديث حالة العرض
                    currentView = this.getAttribute('data-view');
                    // إعادة عرض الصور بالنمط الجديد
                    reapplyViewMode();
                });
            });
        }
        
        // إعادة تطبيق نمط العرض
        function reapplyViewMode() {
            const cards = document.querySelectorAll('.card');
            cards.forEach(card => {
                if (currentView === 'flexible') {
                    card.classList.remove('fixed-size');
                    // إزالة أي أنماط ثابتة مضافَة
                    const imgContainer = card.querySelector('.image-container');
                    const img = card.querySelector('img');
                    if (imgContainer && img) {
                        imgContainer.style.height = 'auto';
                        img.style.maxHeight = '500px';
                    }
                } else {
                    card.classList.add('fixed-size');
                }
            });
        }
        
        // دالة للمسح التلقائي للصور
        async function scanForImages() {
            galleryElement.innerHTML = `
                <div class="loading">
                    <i class="fas fa-spinner fa-spin"></i> جاري فحص جميع الملفات في الجذر...
                </div>
            `;
            
            statsContainer.innerHTML = `<i class="fas fa-search"></i> جاري البحث عن الصور في الجذر...`;
            
            try {
                // محاولة الحصول على قائمة الملفات من الخادم
                let imageFiles = [];
                
                try {
                    // طريقة 1: محاولة جلب الفهرس من الخادم
                    const response = await fetch('./');
                    if (response.ok) {
                        const html = await response.text();
                        imageFiles = extractImageFilesFromHTML(html);
                    }
                } catch (e) {
                    console.log("لا يمكن جلب الفهرس تلقائيًا، استخدام المسح المباشر");
                }
                
                // إذا لم نحصل على نتائج، نستخدم المسح المباشر
                if (imageFiles.length === 0) {
                    imageFiles = await scanImagesDirectly();
                }
                
                // عرض النتائج
                displayImages(imageFiles);
                
            } catch (error) {
                console.error('خطأ في المسح:', error);
                showError('حدث خطأ أثناء البحث عن الصور: ' + error.message);
            }
        }
        
        // دالة لاستخراج أسماء الصور من HTML الفهرس
        function extractImageFilesFromHTML(html) {
            const imageFiles = [];
            const parser = new DOMParser();
            const doc = parser.parseFromString(html, 'text/html');
            
            // البحث عن جميع الروابط في الصفحة
            const links = doc.querySelectorAll('a');
            
            links.forEach(link => {
                const href = link.getAttribute('href');
                if (!href) return;
                
                // استبعاد الروابط الخاصة (مثل المجلدات والروابط الأخرى)
                if (href === '../' || href === './' || href.includes('?')) return;
                if (href.endsWith('/')) return; // استبعاد المجلدات
                
                // التحقق مما إذا كان الملف صورة
                const lowerHref = href.toLowerCase();
                const isImage = imageExtensions.some(ext => lowerHref.endsWith(ext));
                
                if (isImage) {
                    imageFiles.push({
                        name: href,
                        title: getImageTitle(href)
                    });
                }
            });
            
            return imageFiles;
        }
        
        // دالة للمسح المباشر للصور (محاولة تحميل كل صورة محتملة)
        async function scanImagesDirectly() {
            const foundImages = [];
            
            // أولاً: فحص الأسماء الشائعة
            for (const imgName of commonImageNames) {
                if (await checkImageExists(imgName)) {
                    foundImages.push({
                        name: imgName,
                        title: getImageTitle(imgName)
                    });
                }
            }
            
            // ثانياً: محاولة فحص نطاق من الأسماء
            // هذا مفيد إذا كانت صورك بأسماء مثل IMG_4419.jpeg, IMG_4420.jpeg, etc.
            for (let i = 1; i <= 50; i++) {
                const possibleNames = [
                    `IMG_${4400 + i}.jpeg`,
                    `IMG_${4400 + i}.jpg`,
                    `IMG_${4400 + i}.png`,
                    `image${i}.jpg`,
                    `photo${i}.jpeg`,
                    `pic${i}.png`,
                    `صوره${i}.jpg`,
                    `صورة${i}.jpeg`
                ];
                
                for (const name of possibleNames) {
                    if (await checkImageExists(name)) {
                        // تجنب التكرار
                        if (!foundImages.some(img => img.name === name)) {
                            foundImages.push({
                                name: name,
                                title: getImageTitle(name)
                            });
                        }
                    }
                }
            }
            
            return foundImages;
        }
        
        // دالة للتحقق من وجود صورة
        function checkImageExists(url) {
            return new Promise((resolve) => {
                const img = new Image();
                img.onload = () => resolve(true);
                img.onerror = () => resolve(false);
                img.src = url + '?t=' + new Date().getTime(); // إضافة طابع زمني لتجنب الكاش
            });
        }
        
        // دالة لإنشاء عنوان للصورة من اسمها
        function getImageTitle(filename) {
            // إزالة الامتداد
            let title = filename.replace(/\.[^/.]+$/, "");
            
            // استبدال الشرطات والخطوط السفلية بمسافات
            title = title.replace(/[_-]/g, " ");
            
            // تحويل أول حرف إلى كبير
            title = title.charAt(0).toUpperCase() + title.slice(1);
            
            return title;
        }
        
        // دالة للحصول على أبعاد الصورة
        function getImageDimensions(url) {
            return new Promise((resolve) => {
                const img = new Image();
                img.onload = function() {
                    resolve({
                        width: this.width,
                        height: this.height,
                        aspectRatio: this.width / this.height
                    });
                };
                img.onerror = function() {
                    resolve({ width: 0, height: 0, aspectRatio: 1 });
                };
                img.src = url;
            });
        }
        
        // دالة لتحديد نمط الصورة (عمودي/أفقي)
        function getImageOrientation(aspectRatio) {
            if (aspectRatio > 1.2) return 'landscape'; // أفقي
            if (aspectRatio < 0.8) return 'portrait'; // عمودي
            return 'square'; // مربع
        }
        
        // دالة لعرض الصور
        async function displayImages(imageFiles) {
            // تحديث الإحصائيات
            if (imageFiles.length === 0) {
                statsContainer.innerHTML = `
                    <i class="fas fa-exclamation-triangle"></i> لم يتم العثور على أي صور في الجذر
                `;
                
                galleryElement.innerHTML = `
                    <div class="error">
                        <i class="fas fa-images"></i>
                        <h3>لم يتم العثور على صور</h3>
                        <p>لا توجد صور في نفس مستوى ملف index.html</p>
                        <p>لإضافة صور:</p>
                        <ol style="text-align: right; margin: 15px 0; padding-right: 20px;">
                            <li>انقل صورك إلى نفس المجلد الذي يحتوي على index.html</li>
                            <li>تأكد من أن أسماء الصور تحتوي على امتدادات مثل .jpg أو .png</li>
                            <li>اضغط على زر "بحث عن الصور"</li>
                        </ol>
                        <button class="control-btn" onclick="scanForImages()" style="margin-top: 10px;">
                            <i class="fas fa-redo"></i> حاول مرة أخرى
                        </button>
                    </div>
                `;
                return;
            }
            
            statsContainer.innerHTML = `
                <i class="fas fa-check-circle"></i> تم العثور على ${imageFiles.length} صورة في الجذر
            `;
            
            // إنشاء معرض الصور
            let galleryHTML = '';
            
            for (let i = 0; i < imageFiles.length; i++) {
                const image = imageFiles[i];
                
                // الحصول على أبعاد الصورة
                const dimensions = await getImageDimensions(image.name);
                const orientation = getImageOrientation(dimensions.aspectRatio);
                const sizeText = dimensions.width > 0 ? `${dimensions.width} × ${dimensions.height}` : 'غير معروف';
                
                galleryHTML += `
                    <div class="card ${orientation}">
                        <div class="image-wrapper">
                            <div class="image-counter">${i + 1}</div>
                            <div class="image-container">
                                <img src="${image.name}" alt="${image.title}" 
                                     loading="lazy"
                                     onload="this.style.opacity='1'"
                                     onerror="this.onerror=null; this.src='https://via.placeholder.com/300x200/e0e0e0/757575?text=خطأ+في+الصورة'"
                                     style="opacity:0; transition: opacity 0.3s ease;">
                            </div>
                        </div>
                        <div class="card-content">
                            <h3 class="card-title">${image.title}</h3>
                            <div class="file-info">
                                <span><i class="far fa-file"></i> ${image.name}</span>
                                <span class="image-size"><i class="fas fa-expand-alt"></i> ${sizeText}</span>
                                <span><i class="fas fa-${orientation === 'portrait' ? 'arrows-alt-v' : orientation === 'landscape' ? 'arrows-alt-h' : 'square'}"></i> ${orientation === 'portrait' ? 'عمودي' : orientation === 'landscape' ? 'أفقي' : 'مربع'}</span>
                            </div>
                            <button class="download-btn" onclick="downloadImage('${image.name}', '${image.title}')">
                                <i class="fas fa-download"></i> تحميل إلى الهاتف
                            </button>
                        </div>
                    </div>
                `;
            }
            
            galleryElement.innerHTML = galleryHTML;
            
            // تطبيق نمط العرض الحالي
            reapplyViewMode();
        }
        
        // دالة لتحميل الصور
        function downloadImage(imageUrl, imageTitle) {
            // إنشاء رابط تحميل
            const link = document.createElement('a');
            link.href = imageUrl;
            link.download = imageTitle.replace(/\s+/g, '_') + '.' + imageUrl.split('.').pop();
            
            // إضافة الرابط إلى الصفحة والنقر عليه
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            // إظهار رسالة تأكيد
            showMessage(`جاري تحميل "${imageTitle}" إلى معرض الصور في هاتفك`);
        }
        
        // دالة لعرض رسالة للمستخدم
        function showMessage(message) {
            const messageDiv = document.createElement('div');
            messageDiv.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #2ecc71;
                color: white;
                padding: 15px 20px;
                border-radius: 8px;
                box-shadow: 0 5px 15px rgba(0,0,0,0.2);
                z-index: 1000;
                animation: slideIn 0.3s ease;
                display: flex;
                align-items: center;
                gap: 10px;
            `;
            
            messageDiv.innerHTML = `
                <i class="fas fa-check-circle"></i> ${message}
            `;
            
            document.body.appendChild(messageDiv);
            
            setTimeout(() => {
                messageDiv.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => document.body.removeChild(messageDiv), 300);
            }, 3000);
            
            // إضافة أنيميشن
            if (!document.querySelector('#messageAnimations')) {
                const style = document.createElement('style');
                style.id = 'messageAnimations';
                style.textContent = `
                    @keyframes slideIn {
                        from { transform: translateX(100%); opacity: 0; }
                        to { transform: translateX(0); opacity: 1; }
                    }
                    @keyframes slideOut {
                        from { transform: translateX(0); opacity: 1; }
                        to { transform: translateX(100%); opacity: 0; }
                    }
                `;
                document.head.appendChild(style);
            }
        }
        
        // دالة لعرض رسالة خطأ
        function showError(message) {
            galleryElement.innerHTML = `
                <div class="error">
                    <i class="fas fa-exclamation-circle"></i>
                    <h3>حدث خطأ</h3>
                    <p>${message}</p>
                    <button class="control-btn" onclick="scanForImages()" style="margin-top: 10px;">
                        <i class="fas fa-redo"></i> حاول مرة أخرى
                    </button>
                </div>
            `;
            
            statsContainer.innerHTML = `<i class="fas fa-times-circle"></i> خطأ في البحث`;
        }
        
        // دالة لعرض كيفية إضافة الصور
        function showHowToAddImages() {
            const instructions = `
                <div style="text-align: right; background: white; padding: 20px; border-radius: 10px; margin: 20px 0;">
                    <h3><i class="fas fa-info-circle"></i> كيفية إضافة صور إلى المعرض:</h3>
                    <ol style="margin: 15px 0; padding-right: 20px;">
                        <li>تأكد من أن صورك موجودة في <strong>نفس المجلد</strong> الذي يحتوي على index.html</li>
                        <li>يمكن أن تكون أسماء الصور مثل:
                            <ul style="margin: 10px 0; padding-right: 20px;">
                                <li>IMG_4419.jpeg</li>
                                <li>صورة.jpg</li>
                                <li>photo.png</li>
                            </ul>
                        </li>
                        <li>الامتدادات المدعومة: .jpg, .jpeg, .png, .gif, .bmp, .webp, .svg</li>
                        <li>بعد إضافة الصور، اضغط على زر "بحث عن الصور"</li>
                    </ol>
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 5px; border-right: 4px solid #3498db; margin-top: 15px;">
                        <h4><i class="fas fa-expand-alt"></i> خاصية الإطار المرن:</h4>
                        <p>كل صورة تعرض <strong>بحجمها الأصلي</strong> مع إطار يتكيف تلقائيًا مع أبعادها.</p>
                        <p>الصور العمودية تعرض بارتفاع أكبر، والأفقية بعرض أكبر.</p>
                    </div>
                </div>
            `;
            
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.7);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 2000;
                animation: fadeIn 0.3s ease;
            `;
            
            modal.innerHTML = `
                <div style="background: white; border-radius: 15px; padding: 25px; max-width: 500px; width: 90%; position: relative;">
                    <button onclick="this.parentElement.parentElement.remove()" 
                            style="position: absolute; top: 10px; left: 10px; background: #e74c3c; color: white; border: none; width: 30px; height: 30px; border-radius: 50%; cursor: pointer;">
                        <i class="fas fa-times"></i>
                    </button>
                    ${instructions}
                    <button class="control-btn" onclick="this.parentElement.parentElement.remove(); scanForImages()" 
                            style="width: 100%; margin-top: 15px;">
                        <i class="fas fa-search"></i> ابدأ البحث الآن
                    </button>
                </div>
            `;
            
            document.body.appendChild(modal);
        }
        
        // بدء المسح تلقائيًا عند تحميل الصفحة وتهيئة أزرار العرض
        document.addEventListener('DOMContentLoaded', function() {
            initViewToggle();
            scanForImages();
        });
    </script>
</body>
</html>